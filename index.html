<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سازنده کانفیگ MiHoMo - LANShare</title>
    <link rel="icon" type="image/svg+xml" href="assets/images/lan-vpn-icon.svg">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div id="loadingOverlay">
        <div class="spinner"></div>
        <p id="loadingMessage">در حال بارگذاری سایت...</p>
    </div>

    <header>
        <h1>سازنده کانفیگ MiHoMo</h1>
        <button id="themeToggleBtn">
            <i class="fas fa-moon"></i>
            <span class="sr-only">تغییر تم (شب/روز)</span>
        </button>
    </header>

    <main>
        <section class="lan-ip-section panel">
            <h2>۱. آدرس‌های IP دستگاه VPN (LAN)</h2>
            <p class="info-message">
                لطفاً آدرس‌های IP دستگاهی که VPN روی آن فعال است و به LAN شما متصل است را وارد کنید. (هر IP در یک خط جدید یا با کاما جدا شود. مثال: <code>192.168.1.3, 192.168.1.4</code>)
                تا زمانی که حداقل یک IP معتبر وارد نکنید، سایر گزینه‌ها غیرفعال خواهند بود.
            </p>
            <textarea id="lanIpInput" placeholder="آدرس‌های IP دستگاه VPN شما (مثال: 192.168.1.3&#10;192.168.1.4)" dir="ltr" rows="3"></textarea>
            <button id="validateLanIpBtn">تأیید و ادامه</button>
        </section>

        <div id="mainContentWrapper" class="disabled-content">
            <section class="predefined-proxies-section panel">
                <h2>۲. انتخاب سرورهای پیش‌فرض</h2>
                <div class="selection-controls">
                    <button id="selectAllPredefinedProxies">انتخاب همه سرورها</button>
                    <button id="deselectAllPredefinedProxies">لغو انتخاب همه</button>
                </div>
                <div id="predefinedProxiesList" class="proxy-cards-grid">
                </div>
            </section>

            <section class="custom-proxies-section panel">
                <h2>۳. افزودن سرور کاستوم شما (فقط در مرورگرتان ذخیره می‌شود)</h2>
                <div class="input-form">
                    <input type="number" id="customPortInput" placeholder="پورت (مثال: 1080)" dir="ltr">
                    <input type="text" id="customNameInput" placeholder="نام دلخواه (مثال: سرور خصوصی من)" dir="rtl">
                    <select id="customTypeInput" class="custom-select">
                        <option value="socks5">SOCKS5</option>
                        <option value="http">HTTP</option>
                    </select>
                    <button id="addCustomProxyBtn">افزودن سرور</button>
                </div>
                <div id="customProxiesList" class="proxy-cards-grid">
                    <p id="noCustomConfigsMessage" class="info-message" style="display: none;">
                        هنوز سرور کاستومی اضافه نشده است.
                    </p>
                </div>
            </section>

            <section class="template-selection-section panel">
                <h2>۴. انتخاب قالب قوانین</h2>
                <p class="info-message">
                    لطفاً یکی از قالب‌های پیش‌فرض قوانین را انتخاب کنید.
                </p>
                <div class="template-options-grid">
                    <div class="template-option">
                        <input type="radio" id="templateFullIranRules" name="configTemplate" value="full-iran-rules" checked>
                        <label for="templateFullIranRules">
                            <h4>قوانین کامل مخصوص ایران 🇮🇷</h4>
                            <p class="description">این قالب شامل تمامی قوانین بهینه‌سازی شده برای ترافیک ایران و دور زدن فیلترینگ است.</p>
                        </label>
                    </div>
                    <div class="template-option">
                        <input type="radio" id="templateIranOnlyRules" name="configTemplate" value="iran-only-rules">
                        <label for="templateIranOnlyRules">
                            <h4>فقط قوانین سایت های ایرانی 🇮🇷</h4>
                            <p class="description">این قالب فقط شامل قوانین مربوط به سایت‌ها و سرویس‌های ایرانی است و ترافیک بین‌المللی را به پروکسی هدایت می‌کند.</p>
                        </label>
                    </div>
                    <div class="template-option">
                        <input type="radio" id="templateNoRules" name="configTemplate" value="no-rules">
                        <label for="templateNoRules">
                            <h4>بدون قانون (فقط پروکسی) 🌐</h4>
                            <p class="description">این قالب فقط شامل تنظیمات پروکسی شماست و هیچ قانون مسیریابی اضافی ندارد. تمام ترافیک از پروکسی عبور می‌کند.</p>
                        </label>
                    </div>
                </div>
            </section>

            <section class="output-section panel">
                <h2>۵. کانفیگ MiHoMo نهایی</h2>
                <button id="generateConfigBtn">تولید کانفیگ</button>
                <textarea id="outputConfig" readonly rows="20" placeholder="کانفیگ تولید شده در اینجا نمایش داده خواهد شد..."></textarea>
                <button id="downloadConfigBtn" style="display: none;">دانلود کانفیگ (config.yaml)</button>
            </section>
        </div>
    </main>

    <footer class="disabled-content">
        <p>&copy; ۲۰۲۵ ساخته شده با ❤️ برای جامعه اینترنت</p>
    </footer>

    <button id="scrollToTopBtn" class="scroll-btn" title="برو بالا">
        <i class="fas fa-arrow-up"></i>
    </button>
    <button id="scrollToBottomBtn" class="scroll-btn" title="برو پایین">
        <i class="fas fa-arrow-down"></i>
    </button>

    <script src="assets/js/predefinedProxies.js"></script>
    <script src="assets/js/rulesAndGroups.js"></script>
    <script src="assets/js/script.js"></script>
</body>
</html>
