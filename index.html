<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سازنده کانفیگ MiHoMo - LANShare</title>
    <link rel="icon" type="image/svg+xml" href="assets/images/lan-vpn-icon.svg">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div id="loadingOverlay">
        <div class="spinner"></div>
        <p id="loadingMessage">در حال بارگذاری سایت...</p>
    </div>

    <header>
        <h1>سازنده کانفیگ MiHoMo</h1>
        <button id="themeToggleBtn">
            <i class="fas fa-moon"></i>
            <span class="sr-only">تغییر تم (شب/روز)</span>
        </button>
    </header>

    <main>
        <section class="lan-ip-section panel">
            <h2>۱. آدرس‌های IP دستگاه VPN (LAN)</h2>
            <p class="info-message">
                لطفاً آدرس‌های IP دستگاهی که VPN روی آن فعال است و به LAN شما متصل است را وارد کنید. (هر IP در یک خط جدید یا با کاما جدا شود. مثال: <code>192.168.1.3, 192.168.1.4</code>)
                تا زمانی که حداقل یک IP معتبر وارد نکنید، سایر گزینه‌ها غیرفعال خواهند بود.
            </p>
            <textarea id="lanIpInput" placeholder="آدرس‌های IP دستگاه VPN شما (مثال: 192.168.1.3&#10;192.168.1.4)" dir="ltr" rows="3"></textarea>
            <button id="validateLanIpBtn">تأیید و ادامه</button>
        </section>

        <!-- بخش جدید: راهنمای پیدا کردن IP لوکال -->
        <section class="local-ip-guide-section panel">
            <h2>راهنمای پیدا کردن IP لوکال 💡</h2>
            <p>برای پیدا کردن آدرس IP لوکال دستگاه VPN خود، می‌توانید از روش‌های زیر استفاده کنید:</p>
            
            <h3>۱. از طریق مرورگر:</h3>
            <ul class="link-list">
                <li>
                    <a href="https://www.whatismybrowser.com/detect/what-is-my-local-ip-address/" target="_blank">
                        <i class="fas fa-external-link-alt"></i> WhatIsMyBrowser - Local IP
                    </a>
                </li>
                <li>
                    <a href="https://browserleaks.com/webrtc" target="_blank">
                        <i class="fas fa-external-link-alt"></i> BrowserLeaks - WebRTC Local IP
                    </a>
                </li>
            </ul>

            <h3>۲. برای دستگاه‌های اندروید:</h3>
            <p>می‌توانید اپلیکیشن زیر را نصب کنید:</p>
            <ul class="link-list">
                <li>
                    <a href="https://play.google.com/store/apps/details?id=net.techet.netanalyzerlite.an" target="_blank">
                        <i class="fab fa-google-play"></i> Net Analyzer Lite (Google Play)
                    </a>
                </li>
            </ul>

            <h3>۳. از طریق خود نرم‌افزار VPN:</h3>
            <p>برخی از نرم‌افزارهای VPN قابلیت نمایش IP لوکال را دارند، از جمله:</p>
            <ul class="feature-list">
                <li><i class="fas fa-check-circle"></i> Mahsang (مهسا ان جی)</li>
                <li><i class="fas fa-check-circle"></i> Karing (کارینگ)</li>
            </ul>
            <p class="info-message">
                **نکته:** IP لوکال معمولاً با <code>192.168.x.x</code> یا <code>10.x.x.x</code> شروع می‌شود.
            </p>
        </section>
        <!-- پایان بخش جدید -->

        <div id="mainContentWrapper" class="disabled-content">
            <section class="predefined-proxies-section panel">
                <h2>۲. انتخاب سرورهای پیش‌فرض</h2>
                <div class="selection-controls">
                    <button id="selectAllPredefinedProxies">انتخاب همه سرورها</button>
                    <button id="deselectAllPredefinedProxies">لغو انتخاب همه</button>
                </div>
                <div id="predefinedProxiesList" class="proxy-cards-grid">
                </div>
            </section>

            <section class="custom-proxies-section panel">
                <h2>۳. افزودن سرور کاستوم شما (فقط در مرورگرتان ذخیره می‌شود)</h2>
                <div class="input-form">
                    <input type="number" id="customPortInput" placeholder="پورت (مثال: 1080)" dir="ltr">
                    <input type="text" id="customNameInput" placeholder="نام دلخواه (مثال: سرور خصوصی من)" dir="rtl">
                    <select id="customTypeInput" class="custom-select">
                        <option value="socks5">SOCKS5</option>
                        <option value="http">HTTP</option>
                    </select>
                    <button id="addCustomProxyBtn">افزودن سرور</button>
                </div>
                <div id="customProxiesList" class="proxy-cards-grid">
                    <p id="noCustomConfigsMessage" class="info-message" style="display: none;">
                        هنوز سرور کاستومی اضافه نشده است.
                    </p>
                </div>
            </section>

            <section class="template-selection-section panel">
                <h2>۴. انتخاب قالب قوانین</h2>
                <p class="info-message">
                    لطفاً یکی از قالب‌های پیش‌فرض قوانین را انتخاب کنید.
                </p>
                <div class="template-options-grid">
                    <div class="template-option">
                        <input type="radio" id="templateFullIranRules" name="configTemplate" value="full-iran-rules" checked>
                        <label for="templateFullIranRules">
                            <h4>قوانین کامل مخصوص ایران 🇮🇷</h4>
                            <p class="description">این قالب شامل تمامی قوانین بهینه‌سازی شده برای ترافیک ایران و دور زدن فیلترینگ است.</p>
                        </label>
                    </div>
                    <div class="template-option">
                        <input type="radio" id="templateIranOnlyRules" name="configTemplate" value="iran-only-rules">
                        <label for="templateIranOnlyRules">
                            <h4>فقط قوانین سایت های ایرانی 🇮🇷</h4>
                            <p class="description">این قالب فقط شامل قوانین مربوط به سایت‌ها و سرویس‌های ایرانی است و ترافیک بین‌المللی را به پروکسی هدایت می‌کند.</p>
                        </label>
                    </div>
                    <div class="template-option">
                        <input type="radio" id="templateNoRules" name="configTemplate" value="no-rules">
                        <label for="templateNoRules">
                            <h4>بدون قانون (فقط پروکسی) 🌐</h4>
                            <p class="description">این قالب فقط شامل تنظیمات پروکسی شماست و هیچ قانون مسیریابی اضافی ندارد. تمام ترافیک از پروکسی عبور می‌کند.</p>
                        </label>
                    </div>
                </div>
            </section>

            <section class="output-section panel">
                <h2>۵. کانفیگ MiHoMo نهایی</h2>
                <div class="file-name-input-group">
                    <label for="fileNameInput">نام فایل خروجی:</label>
                    <input type="text" id="fileNameInput" placeholder="مثال: my_mihomo_config">
                </div>
                <button id="generateConfigBtn">تولید کانفیگ</button>
                <textarea id="outputConfig" readonly rows="20" placeholder="کانفیگ تولید شده در اینجا نمایش داده خواهد شد..."></textarea>
                <button id="downloadConfigBtn" style="display: none;">دانلود کانفیگ (.yaml)</button>
            </section>
        </div>
    </main>

    <footer class="disabled-content">
        <p>&copy; ۲۰۲۵ ساخته شده با ❤️ برای جامعه اینترنت</p>
        <div class="social-links">
            <a href="https://t.me/vpnclashfa" target="_blank" rel="noopener noreferrer">
                <img src="https://www.google.com/s2/favicons?sz=32&domain=t.me" alt="تلگرام">
                <span>تلگرام</span>
            </a>
            <a href="https://twitter.com/coldwater_10" target="_blank" rel="noopener noreferrer">
                <img src="https://www.google.com/s2/favicons?sz=32&domain=twitter.com" alt="توییتر">
                <span>توییتر</span>
            </a>
            <a href="https://www.tvtime.com/en/user/43351079/profile" target="_blank" rel="noopener noreferrer">
                <img src="https://www.google.com/s2/favicons?sz=32&domain=tvtime.com" alt="تی‌وی تایم">
                <span>تی‌وی تایم</span>
            </a>
            <a href="https://linktr.ee/coldwater_10" target="_blank" rel="noopener noreferrer">
                <img src="https://www.google.com/s2/favicons?sz=32&domain=linktr.ee" alt="لینک‌تری">
                <span>لینک‌تری</span>
            </a>
            <a href="https://github.com/10ium/free-sub-link" target="_blank" rel="noopener noreferrer" class="free-config-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 10px; vertical-align: middle;">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0-.33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1.51-1V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l-.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V15z"></path>
                </svg>
                <span>کانفیگ رایگان</span>
            </a>
        </div>
    </footer>

    <button id="scrollToTopBtn" class="scroll-btn" title="برو بالا">
        <i class="fas fa-arrow-up"></i>
    </button>
    <button id="scrollToBottomBtn" class="scroll-btn" title="برو پایین">
        <i class="fas fa-arrow-down"></i>
    </button>

    <script src="assets/js/predefinedProxies.js"></script>
    <script src="assets/js/rulesAndGroups.js"></script>
    <script src="assets/js/script.js"></script>
</body>
</html>
